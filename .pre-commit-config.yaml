---
repos:
  - repo: https://github.com/hadolint/hadolint
    rev: v2.14.0
    hooks:
      - id: hadolint

  - repo: https://github.com/shellcheck-py/shellcheck-py
    rev: v0.10.0.1
    hooks:
      - id: shellcheck

  - repo: https://github.com/adrienverge/yamllint
    rev: v1.38.0
    hooks:
      - id: yamllint
        exclude: ^.*templates/.*\.yaml

  - repo: https://github.com/DavidAnson/markdownlint-cli2
    rev: v0.21.0
    hooks:
      - id: markdownlint-cli2
        language_version: system

  - repo: https://github.com/editorconfig-checker/editorconfig-checker
    rev: v3.6.0
    hooks:
      - id: editorconfig-checker

  - repo: local
    hooks:
      - id: trivy-fs
        name: Trivy filesystem scan
        entry: trivy
        args: [fs, .]
        language: system
        pass_filenames: false

  - repo: https://github.com/commitizen-tools/commitizen
    rev: v4.13.0
    hooks:
      - id: commitizen

  - repo: local
    hooks:
      - id: vale sync
        name: Vale sync
        entry: |
          bash -c '
          lock=.vale/.sync.lock
          [ -d .vale/Google ] && exit 0
          mkdir -p .vale
          (flock -n 200 || exit 0) 200>"$lock"
          rm -rf .vale/Google 2>/dev/null || true
          vale sync
          rm -f "$lock"
          '
        language: system
        pass_filenames: false
        always_run: true

  - repo: https://github.com/errata-ai/vale
    rev: v3.13.0
    hooks:
      - id: vale

  - repo: local
    hooks:
      - id: jsonlint
        name: JSON Lint
        entry: jsonlint -M json5
        language: system
        files: \.json$

  - repo: https://github.com/gruntwork-io/pre-commit
    rev: v0.1.30
    hooks:
      - id: helmlint

  - repo: https://github.com/jtyr/kubeconform-helm
    rev: v0.2.0
    hooks:
      - id: kubeconform-helm

  - repo: local
    hooks:
      - id: renovate-config-validator
        name: Validate Renovate Config
        entry: renovate-config-validator
        language: system
        files: '(^|/).?renovate(?:rc)?(?:\.json5?)?$'

  - repo: https://github.com/instrumentl/pre-commit-just
    rev: v0.1
    hooks:
      - id: format-justfile
